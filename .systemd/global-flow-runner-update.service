[Unit]
Description=Flow Runner Update

[Service]
Type=oneshot
TimeoutStartSec=0
ExecStartPre=/bin/sh -c '/usr/bin/docker login \
  --username $(/usr/bin/etcdctl get /docker/username) \
  --password $(/usr/bin/etcdctl get /docker/password) \
  --email $(/usr/bin/etcdctl get /docker/email)'
ExecStartPre=/bin/sh -c \
  "/usr/bin/docker pull octoblu/flow-runner:latest"
ExecStart=/bin/sh -c \
  "fleetctl stop global-flow-runner-update.service"

[X-Fleet]
Global=true
